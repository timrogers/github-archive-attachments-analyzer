# GitHub Archive Attachments Analyzer (`gaaa`)

## Context

GitHub migration archives generated by the [REST API](https://docs.github.com/en/rest/migrations/orgs?apiVersion=2022-11-28#start-an-organization-migration) or [`ghe-migrator`](https://docs.github.com/en/enterprise-server@3.4/admin/user-management/migrating-data-to-and-from-your-enterprise/exporting-migration-data-from-your-enterprise) are used to move between GitHub products. These archives include your Git source and commit history, but also your "metadata": issues, pull requests, etc.

Issues and pull requests on GitHub can include image, video and other attachments. These can make your archive very large, which can slow down your migration and even limit the tools you can use.

This tool allows you to __identify large attachments in your archives so you can clean them up, reducing the archive size__. Once you know where a large attachment is, you can remove the reference from the Markdown, and then it'll no longer be included in your archives.

## Usage

1. Download the latest release of `gaaa` from our ["Releases" page](https://github.com/timrogers/github-archive-attachments-analyzer/releases) and add it your system's path, so you can easily execute it from a terminal/command prompt. *`gaaa` is available for macOS, Windows and Linux.*
1. Generate an archive using the [REST API](https://docs.github.com/en/rest/migrations/orgs?apiVersion=2022-11-28#start-an-organization-migration) or [`ghe-migrator`](https://docs.github.com/en/enterprise-server@3.4/admin/user-management/migrating-data-to-and-from-your-enterprise/exporting-migration-data-from-your-enterprise) and download it.
1. Extract the `.tar.gz` archive file.
1. Open a terminal/command prompt in the extracted directory.
1. Run `gaaa`. All of the attachments inside your archive will be listed, ordered by size, with a link to the issue/pull request where the attachment is used.

## Development

When making changes to this tool's source code locally, you can test it to check that it is working correctly by running `cargo run` inside the `fixtures` directory.

## Cutting a release

When a release is created in GitHub, a GitHub Actions workflow will run automatically to build binaries for macOS, Windows and Linux, which will be added as release assets to the release.